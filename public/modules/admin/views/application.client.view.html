<section class="admin-application">
	<div class="row" ng-controller="applicationController">    
		<div class="col-md-4">
			<div class="well">
				<form name="candidateForm" novalidate ng-submit="addCandidate(newCandidate)">
					<div class="form-group row">
						<label>Select Event:</label>
						<div ng-dropdown-multiselect="" options="selectEvents" selected-model="newCandidateEvents" extra-settings="selectSettings" required></div>
					</div>
					<div class="form-group row">
						<label>First Name:</label>
						<input name="fName" class="form-control" type="text" ng-model="newCandidate.fName" required>
						<p ng-show="candidateForm.fName.$invalid && !candidateForm.fName.$pristine" class="help-block">A first name is required.</p>
					</div>
					<div class="form-group row">
						<label>Last Name:</label>
						<input name="lName" class="form-control" type="text" ng-model="newCandidate.lName" required>
						<p ng-show="candidateForm.lName.$invalid && !candidateForm.lName.$pristine" class="help-block">A last name is required.</p>
					</div>
					<div class="form-group row">
						<label>Email Address:</label>
						<input name="email" class="form-control" type="email" ng-model="newCandidate.email" required>
						 <p ng-show="candidateForm.email.$invalid && !candidateForm.email.$pristine" class="help-block">Enter a valid email.</p>
					</div>
					<div class="form-group row">
						<label>Notes (Optional):</label>
						<textarea name="notes" class="form-control" type="text" ng-model="newCandidate.note"/>
					</div>
					<button type="submit" class="btn btn-primary" ng-disabled="candidateForm.$invalid || newCandidateEvents.length === 0">+ Candidate</button>
				</form>
			</div>
		</div>

		<div class="col-md-8">
			<h2 ng-if="isEventSelected">Pending Applications for {{selectedEvent}}</h2>
			<h2 ng-if="!isEventSelected" class="text-danger">Please select an event (in the top right-hand corner).</h2>
			<table ng-table="tableParams" show-filter="true" class="table table-bordered">
				<tr ng-repeat="candidate in $data">
					<td data-title="'Send Message'" width="50">
						<input type="checkbox" ng-click="setSelected(candidate._id, candidate.email)" />
					</td>
					<td data-title="'Candidate'" sortable="'fName'" filter="{'fName':'text'}" width="200">
						{{candidate.fName + ' ' + candidate.lName}}
					</td>
					<td data-title="'Email'">
						{{candidate.email}}
					</td>
					<td data-title="'Status'" sortable="'status'" filter="{'status':'text'}" width="100">
						{{candidate.events.status}}
					</td>
					<td data-title="'Notes'" sortable="'note'" filter="{'note':'text'}">
						{{candidate.note}}
					</td>
					<td data-title="'Accept'" width="90" class="text-center">
						<button ng-if="!candidate.events.accepted" class="btn btn-success" ng-click="acceptCandidate(candidate)">Accept</button>
						<span ng-if="candidate.events.accepted" class="glyphicon glyphicon-ok"></span>
					</td>
					<td data-title="'Deny'" width="90">
						<button class="btn btn-danger" ng-click="denyCandidate(candidate)">Deny</button>
					</td>
				</tr>
			</table>
		</div>
		<div class="col-md-12 frank-main-view" ng-show="selected.emails.length">
			<form class="frank-admin-email-form" name="frankAdminEmail" ng-submit="sendMessages()">
				<label>To
					<br />
					<div class="frank-admin-email-to">
						<span ng-repeat="email in selected.emails" class="frank-admin-emails">{{email}}</span>
					</div>
				</label>
				<br />
				<label>Subject
					<br />
					<input type="text" id="frank-admin-email-subject" ng-model="email.subject" />
				</label>
				<br />
				<label>Message
					<br />
					<textarea id="frank-admin-email-message" ng-model="email.message" rows="12" cols="50" required />
				</label>
				<br />
				<button role="submit" class="btn invitation-button" id="admin-email-submit" ng-disabled="frankAdminEmail.$invalid"><i class="fa fa-envelope-o"></i>Send</button>
				<br />
	            <div class="alert alert-danger" role="alert" ng-if="email.error">
	              <span ng-repeat="mess in email.errmess">
	                <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
	                {{mess}}
	                <br />
	              </span>
	            </div>
			</form>
		</div>
	</div>
</section>
